{"version":3,"sources":["HOME/task1.js"],"names":["posts","document","getElementById","URL","queryApi","endpoint","fetch","then","r","ok","json","Promise","reject","all","postsArr","usersArr","postsCounterOb","forEach","userId","post","idx","showPost","catch","err","console","log","textContent","finally","title","countsOfPosts","count","name","innerHTML","addEventListener","handleAuthor","target","className","hiddenBlock","nextElementSibling","style","attributes","value"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAd;AACA,MAAMC,GAAG,GAAG,uCAAZ;;AAEA,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AAC1B,SAAOC,KAAK,CAACH,GAAG,GAAGE,QAAP,CAAL,CAAsBE,IAAtB,CAA4BC,CAAD,IAChCA,CAAC,CAACC,EAAF,GAAOD,CAAC,CAACE,IAAF,EAAP,GAAkBC,OAAO,CAACC,MAAR,CAAe,uBAAf,CADb,CAAP;AAGD;;AAEDD,OAAO,CAACE,GAAR,CAAY,CAACT,QAAQ,CAAC,OAAD,CAAT,EAAoBA,QAAQ,CAAC,OAAD,CAA5B,CAAZ,EACGG,IADH,CACQ,CAAC,CAACO,QAAD,EAAWC,QAAX,CAAD,KAA0B;AAC9B,MAAIC,cAAc,GAAG,EAArB;AAEAF,EAAAA,QAAQ,CAACG,OAAT,CAAiB,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AAC/B,KAACF,cAAc,CAACE,MAAD,CAAf,KAA4BF,cAAc,CAACE,MAAD,CAAd,GAAyB,CAArD;AACAF,IAAAA,cAAc,CAACE,MAAD,CAAd;AACD,GAHD;AAKAJ,EAAAA,QAAQ,CAACG,OAAT,CACE,CAACE,IAAD,EAAOC,GAAP,KAAe,EAAEA,GAAG,GAAG,EAAR,KAAeC,QAAQ,CAACF,IAAD,EAAOJ,QAAP,EAAiBC,cAAjB,CADxC;AAGD,CAZH,EAaGM,KAbH,CAaUC,GAAD,IAAS;AACdC,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAvB,EAAAA,KAAK,CAAC0B,WAAN,GAAoB,kBAApB;AACD,CAhBH,EAiBGC,OAjBH,CAiBW,MAAM;AACbH,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD,CAnBH;;AAqBA,SAASJ,QAAT,CAAkB;AAAEH,EAAAA,MAAF;AAAUU,EAAAA;AAAV,CAAlB,EAAqCb,QAArC,EAA+Cc,aAA/C,EAA8D;AAC5D,MAAIC,KAAK,GAAGD,aAAa,CAACX,MAAD,CAAzB;AACA,MAAIa,IAAI,GAAGhB,QAAQ,CAACG,MAAM,GAAG,CAAV,CAAR,CAAqBa,IAAhC;AAEA,SAAQ/B,KAAK,CAACgC,SAAN,IAAoB;AAC9B;AACA,wCAAwCJ,KAAM;AAC9C;AACA;AACA,sBAAsBG,IAAK;AAC3B,qBAAqBD,KAAM;AAC3B;AACA,WARE;AASD;;AAED7B,QAAQ,CAACgC,gBAAT,CAA0B,OAA1B,EAAmCC,YAAnC;;AAEA,SAASA,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAkC;AAChC,MAAIA,MAAM,CAACC,SAAP,KAAqB,aAAzB,EAAwC;AACtC,QAAIC,WAAW,GAAGF,MAAM,CAACG,kBAAzB;AACAC,IAAAA,KAAK,GAAGF,WAAW,CAACG,UAAZ,CAAuB,CAAvB,EAA0BC,KAAlC;AAEAJ,IAAAA,WAAW,CAACG,UAAZ,CAAuB,CAAvB,EAA0BC,KAA1B,GACEF,KAAK,KAAK,cAAV,GAA2B,eAA3B,GAA6C,cAD/C;AAED;AACF","file":"task1.582b7c98.js","sourceRoot":"..","sourcesContent":["/* \n    Вывести на странице 10 постов с ресурса \n    https://jsonplaceholder.typicode.com/posts\n\n    Выводить \n    - заголовок поста\n   - ссылку на автора этого поста (class присвоить author-link) \n\n    При клике на ссылку автора поста вывести под ссылкой \n     - имя user\n     - количество постов этого user      \n    */\n\nconst posts = document.getElementById(\"posts\");\nconst URL = \"https://jsonplaceholder.typicode.com/\";\n\nfunction queryApi(endpoint) {\n  return fetch(URL + endpoint).then((r) =>\n    r.ok ? r.json() : Promise.reject(\"unseccessfull request\")\n  );\n}\n\nPromise.all([queryApi(\"posts\"), queryApi(\"users\")])\n  .then(([postsArr, usersArr]) => {\n    let postsCounterOb = {};\n\n    postsArr.forEach(({ userId }) => {\n      !postsCounterOb[userId] && (postsCounterOb[userId] = 0);\n      postsCounterOb[userId]++;\n    });\n\n    postsArr.forEach(\n      (post, idx) => !(idx % 10) && showPost(post, usersArr, postsCounterOb)\n    );\n  })\n  .catch((err) => {\n    console.log(err);\n    posts.textContent = \"Error. Try later\";\n  })\n  .finally(() => {\n    console.log(\"FINAL\");\n  });\n\nfunction showPost({ userId, title }, usersArr, countsOfPosts) {\n  let count = countsOfPosts[userId];\n  let name = usersArr[userId - 1].name;\n\n  return (posts.innerHTML += `\n    <div style=\"border-bottom: 1px solid grey; padding-bottom:20px\">\n        <p style=\"margin:5px\">Title: \"${title}\"</p>\n        <a class=\"author-link\" href=\"#\">show name of author</a>\n        <div style=\"display:none\" >\n            Author: ${name}<br>\n            Posts: ${count}\n        </div>\n    </div>`);\n}\n\ndocument.addEventListener(\"click\", handleAuthor);\n\nfunction handleAuthor({ target }) {\n  if (target.className === \"author-link\") {\n    let hiddenBlock = target.nextElementSibling;\n    style = hiddenBlock.attributes[0].value;\n\n    hiddenBlock.attributes[0].value =\n      style === \"display:none\" ? \"display:block\" : \"display:none\";\n  }\n}\n"]}